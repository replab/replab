
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
  
  <!-- Licensed under the Apache 2.0 License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/open-sans/stylesheet.css" />
  <!-- Licensed under the SIL Open Font License -->
  <link rel="stylesheet" type="text/css" href="../_static/fonts/source-serif-pro/source-serif-pro.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="../_static/css/bootstrap-theme.min.css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <title>Symmetric SDPs &#8212; RepLAB 0.6.1 documentation</title>
    <link rel="stylesheet" href="../_static/guzzle.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/collapse_admonitions.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="../_static/collapse_admonitions.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script type="text/javascript" src="../_static/js/collapse_helper.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Topic guides" href="../topic/index.html" />
    <link rel="prev" title="How to" href="index.html" />
  
   

  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../mat-modindex.html" title="MATLAB Module Index"
             >matlab index</a> |</li>
        <li class="right" >
          <a href="../topic/index.html" title="Topic guides"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="How to"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">RepLAB 0.6.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">How to</a> &#187;</li> 
      </ul>
    </div>
    <div class="container-wrapper">

      <div id="mobile-toggle">
        <a href="#"><span class="glyphicon glyphicon-align-justify" aria-hidden="true"></span></a>
      </div>
  <div id="left-column">
    <div class="sphinxsidebar"><a href="
    ../index.html" class="text-logo">RepLAB</a>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h2>Table Of Contents</h2>
  </div>
  <div class="sidebar-toc">
    
    
      <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">How to</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">How to solve a semi-definite program (SDP) subject to symmetries</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Preparation">Preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Formulating-a-symmetric-SDP">Formulating a symmetric SDP</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Symmetric-formulation">Symmetric formulation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#Constructing-a-symmetric-SDP-matrix-with-additional-structure">Constructing a symmetric SDP matrix with additional structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Imposing-symmetry-to-an-existing-SDP-matrix">Imposing symmetry to an existing SDP matrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Block-diagonalizing-a-symmetric-SDP-matrix">Block-diagonalizing a symmetric SDP matrix</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Comparison-with-a-direct-formulation">Comparison with a direct formulation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#Complexity-comparison">Complexity comparison</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../topic/index.html">Topic guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../talks/index.html">Talks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">Technical Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development/Community</a></li>
</ul>

    
  </div>
</div>
      
    </div>
  </div>
        <div id="right-column">
          
          <div role="navigation" aria-label="breadcrumbs navigation">
            <ol class="breadcrumb">
              <li><a href="../index.html">Docs</a></li>
              
                <li><a href="index.html">How to</a></li>
              
              <li>Symmetric SDPs</li>
            </ol>
          </div>
          
          <div class="document clearer body">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    min-width: 6ex;
    padding-top: 0.4em;
    padding-right: 0.4em;
    text-align: right;
    flex: 0;
}
@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    padding: 0.4em;
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Symmetric-SDPs">
<h1>Symmetric SDPs<a class="headerlink" href="#Symmetric-SDPs" title="Permalink to this headline">¶</a></h1>
<p>This document illustrated how <em>RepLAB</em> can be used to solve SemiDefinite Programs (SDP) subject to symmetries. Several methods for constructing SDPs subject to symmetries are presented.</p>
<div class="section" id="Preparation">
<h2>Preparation<a class="headerlink" href="#Preparation" title="Permalink to this headline">¶</a></h2>
<p>As always, before using <em>RepLAB</em> commands, initialize the library:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-octave notranslate"><div class="highlight"><pre>
<span></span><span class="nb">run</span> <span class="p">.</span><span class="o">./</span><span class="p">.</span><span class="o">./</span><span class="n">replab_init</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Adding RepLAB to the path
warning: function /home/denis/w/replab/src/help.m shadows a core library function
Adding RepLAB package to the path
Adding VPI to the path
Adding MOxUnit to the path
Adding embedded YALMIP to the path
Adding embedded SDPT3 solver to the path
Adding MOcov to the path
</pre></div></div>
</div>
<p>Commands in this document makes use ot the YALMIP interface to solve convex optimization problems, see &lt;../installation.html installation instructions&gt;.</p>
</div>
<div class="section" id="Introduction">
<h2>Introduction<a class="headerlink" href="#Introduction" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Semidefinite_programming">Semidefinite programming</a> is a form of optimization that admits semidefinite constraints (as in the condition that all eigenvalues of a matrix must be positive). It naturally arises in various fields, including operational research and polynomial optimization.</p>
<p>The ability to solve a semidefinite program depends heavily on:</p>
<ul class="simple">
<li><p>the size of the positive semi-definite (PSD) blocks</p></li>
<li><p>the number of variables and constraints involved</p></li>
</ul>
<p>A positive semi-definite matrix that is invariant under some joint permutation of its lines and columns can be decomposed into a block diagonal form. This allows to:</p>
<ul class="simple">
<li><p>decompose PSD blocks into smaller PSD blocks</p></li>
<li><p>set many variables to zero, hence reducing the number of variables in the problem</p></li>
</ul>
<p>As we shows below, <em>RepLAB</em> performs this simplification automatically.</p>
</div>
<div class="section" id="Formulating-a-symmetric-SDP">
<h2>Formulating a symmetric SDP<a class="headerlink" href="#Formulating-a-symmetric-SDP" title="Permalink to this headline">¶</a></h2>
<p>To illustrate the usage of <em>RepLAB</em> for symmetric SDPs, we consider a simple example involving a 3x3 matrix <span class="math notranslate nohighlight">\(M\)</span> with trace 1 that is symmetric under cyclic permutation of its indices, i.e. it satisfies <span class="math notranslate nohighlight">\(M([2\ 3\ 1], [2\ 3\ 1]) = M\)</span>. We ask what is the smallest value that the off-diagonal element <span class="math notranslate nohighlight">\(M(1,2)\)</span> can take if this matrix <span class="math notranslate nohighlight">\(M\)</span> has only positive eigenvalues.</p>
<div class="section" id="Symmetric-formulation">
<h3>Symmetric formulation<a class="headerlink" href="#Symmetric-formulation" title="Permalink to this headline">¶</a></h3>
<p>Using <em>RepLAB</em>, we can solve this problem as follows.</p>
<p>We start by defining a matrix which satisfies the desired symmetry</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-octave notranslate"><div class="highlight"><pre>
<span></span><span class="n">permutation</span> <span class="p">=</span> <span class="p">[</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">1</span><span class="p">];</span>
<span class="n">MSym</span> <span class="p">=</span> <span class="n">replab</span><span class="p">.</span><span class="n">CommutantVar</span><span class="p">.</span><span class="n">fromPermutations</span><span class="p">({</span><span class="n">permutation</span><span class="p">},</span> <span class="s">&#39;symmetric&#39;</span><span class="p">,</span> <span class="s">&#39;real&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
warning: -largeArrayDims and -compatibleArrayDims are accepted for compatibility, but ignored
</pre></div></div>
</div>
<p>We can then perform the optimization with:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-octave notranslate"><div class="highlight"><pre>
<span></span><span class="n">constraintsSym</span> <span class="p">=</span> <span class="p">[</span><span class="nb">trace</span><span class="p">(</span><span class="n">MSym</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="n">MSym</span> <span class="o">&gt;</span><span class="p">=</span> <span class="mi">0</span><span class="p">];</span>
<span class="n">diagnosticSym</span> <span class="p">=</span> <span class="n">optimize</span><span class="p">(</span><span class="n">constraintsSym</span><span class="p">,</span> <span class="n">MSym</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">sdpsettings</span><span class="p">(</span><span class="s">&#39;verbose&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">));</span>
<span class="n">MSymOpt</span> <span class="p">=</span> <span class="n">value</span><span class="p">(</span><span class="n">MSym</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
MSymOpt =

   0.33333  -0.16667  -0.16667
  -0.16667   0.33333  -0.16667
  -0.16667  -0.16667   0.33333

</pre></div></div>
</div>
<p>We find the critical value of <span class="math notranslate nohighlight">\(-1/6\)</span>.</p>
<p>At the end of this page, we discuss how this formulation is more efficient than a direct formulation which would not take advantage of the symmetry properties of the considered matrix.</p>
</div>
</div>
<div class="section" id="Constructing-a-symmetric-SDP-matrix-with-additional-structure">
<h2>Constructing a symmetric SDP matrix with additional structure<a class="headerlink" href="#Constructing-a-symmetric-SDP-matrix-with-additional-structure" title="Permalink to this headline">¶</a></h2>
<p>An SDP matrix might sometimes be subject to more than only symmetry constraints. When these additional constraints take the form of equality between some of the matrix elements, it can be conveniently described by a matrix having at each element the index of the corresponding variable. All elements with identical index are then understood as being equal to each other.</p>
<p>For instance, imposing on a 3x3 matrix that elements (1,1) ans (2,1) are must be equal to each other can be described by the following index matrix:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-octave notranslate"><div class="highlight"><pre>
<span></span><span class="n">indexMatrix</span> <span class="p">=</span> <span class="p">[</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span>
               <span class="mi">1</span> <span class="mi">4</span> <span class="mi">5</span>
               <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span><span class="p">];</span>
</pre></div>
</div>
</div>
<p>An SDP matrix satisfying this constraint is then obtained</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-octave notranslate"><div class="highlight"><pre>
<span></span><span class="n">cstrSdpMatrix</span> <span class="p">=</span> <span class="n">replab</span><span class="p">.</span><span class="n">CommutantVar</span><span class="p">.</span><span class="n">fromIndexMatrix</span><span class="p">(</span><span class="n">indexMatrix</span><span class="p">,</span> <span class="p">{</span><span class="n">permutation</span><span class="p">},</span> <span class="s">&#39;symmetric&#39;</span><span class="p">,</span> <span class="s">&#39;real&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
cstrSdpMatrix =

Commutant variable 3x3 (2 blocks, 1 scalar variables)
           dim: 3
   dimensions1: [1, 2]
         field: &#39;real&#39;
    matrixType: &#39;symmetric&#39;
multiplicities: [1, 1]
         types: &#39;RC&#39;
             U: 3 x 3 double
        blocks: [1, 2]

</pre></div></div>
</div>
<p>In this trivial case, the SDP matrix is left to contain only one variable: the additional constraints collapsed the all group orbits together.</p>
</div>
<div class="section" id="Imposing-symmetry-to-an-existing-SDP-matrix">
<h2>Imposing symmetry to an existing SDP matrix<a class="headerlink" href="#Imposing-symmetry-to-an-existing-SDP-matrix" title="Permalink to this headline">¶</a></h2>
<p>Symmetry constraints can also be straightforwardly imposed on existing SDP matrices with arbitrary structure.</p>
<p>For instance, consider the following special SDP matrix</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-octave notranslate"><div class="highlight"><pre>
<span></span><span class="n">x</span> <span class="p">=</span> <span class="n">sdpvar</span><span class="p">;</span>
<span class="n">y</span> <span class="p">=</span> <span class="n">sdpvar</span>
<span class="n">MSpecial</span> <span class="p">=</span> <span class="p">[</span><span class="mi">1</span> <span class="n">x</span> <span class="n">y</span>
            <span class="n">x</span> <span class="mi">1</span> <span class="n">y</span>
            <span class="n">x</span> <span class="n">y</span> <span class="mi">1</span><span class="p">];</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Linear scalar (real, 1 variable)
Coeffiecient range: 1 to 1
</pre></div></div>
</div>
<p>We can directly impose cyclic symmetry onto this matrix:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-octave notranslate"><div class="highlight"><pre>
<span></span><span class="n">MSpecialSym</span> <span class="p">=</span> <span class="n">replab</span><span class="p">.</span><span class="n">CommutantVar</span><span class="p">.</span><span class="n">fromSdpMatrix</span><span class="p">(</span><span class="n">MSpecial</span><span class="p">,</span> <span class="p">{[</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">1</span><span class="p">]})</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
MSpecialSym =

Commutant variable 3x3 (2 blocks, 5 scalar variables)
              dim: 3
      dimensions1: [1, 2]
            field: &#39;real&#39;
       matrixType: &#39;full&#39;
   multiplicities: [1, 1]
            types: &#39;RC&#39;
                U: 3 x 3 double
           blocks: [1, 2]
linearConstraints: constraint

</pre></div></div>
</div>
<p>Requesting this matrix to be PSD now imposes both</p>
<ul class="simple">
<li><p>Positivity of the 1x1 and 2x2 blocks</p></li>
<li><p>Equality with the imposed form</p></li>
</ul>
<p>as can be seen with</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-octave notranslate"><div class="highlight"><pre>
<span></span><span class="n">MSpecialSym</span> <span class="o">&gt;</span><span class="p">=</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
|   ID|                    Constraint|   Coefficient range|
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
|   #1|   Element-wise inequality 1x1|              1 to 1|
|   #2|   Element-wise inequality 4x1|              1 to 1|
|   #3|       Equality constraint 3x3|        0.33333 to 1|
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
</pre></div></div>
</div>
</div>
<div class="section" id="Block-diagonalizing-a-symmetric-SDP-matrix">
<h2>Block-diagonalizing a symmetric SDP matrix<a class="headerlink" href="#Block-diagonalizing-a-symmetric-SDP-matrix" title="Permalink to this headline">¶</a></h2>
<p>When an SDP matrix is invariant under the considered permutations, <em>RepLAB</em> can be used to block-diagonalize it. This allows imposing the positivity of the matrix through the positivity of small blocks. As an example, consider the following matrix</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-octave notranslate"><div class="highlight"><pre>
<span></span><span class="n">MInvariant</span> <span class="p">=</span> <span class="p">[</span><span class="n">x</span> <span class="mi">1</span> <span class="n">y</span>
              <span class="n">y</span> <span class="n">x</span> <span class="mi">1</span>
              <span class="mi">1</span> <span class="n">y</span> <span class="n">x</span><span class="p">];</span>
</pre></div>
</div>
</div>
<p>It is indeed invariant:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-octave notranslate"><div class="highlight"><pre>
<span></span><span class="n">MInvariant</span> <span class="o">-</span> <span class="n">MInvariant</span><span class="p">(</span><span class="n">permutation</span><span class="p">,</span><span class="n">permutation</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
ans =

   0   0   0
   0   0   0
   0   0   0

</pre></div></div>
</div>
<p>But not transpose-invariant (which is necessary for PSD matrices), so we enforce it:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-octave notranslate"><div class="highlight"><pre>
<span></span><span class="n">MInvariant</span> <span class="p">=</span> <span class="n">MInvariant</span> <span class="o">+</span> <span class="n">MInvariant</span><span class="o">&#39;</span><span class="p">;</span>
<span class="n">MInvariant</span> <span class="o">-</span> <span class="n">MInvariant</span><span class="o">&#39;</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
ans =

   0   0   0
   0   0   0
   0   0   0

</pre></div></div>
</div>
<p>We can now block-diagonalize it by calling</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-octave notranslate"><div class="highlight"><pre>
<span></span><span class="n">MInvariantBlock</span> <span class="p">=</span> <span class="n">replab</span><span class="p">.</span><span class="n">CommutantVar</span><span class="p">.</span><span class="n">fromSymSdpMatrix</span><span class="p">(</span><span class="n">MInvariant</span><span class="p">,</span> <span class="p">{[</span><span class="mi">2</span> <span class="mi">3</span> <span class="mi">1</span><span class="p">]})</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
MInvariantBlock =

Commutant variable 3x3 (2 blocks, 2 scalar variables)
           dim: 3
   dimensions1: [1, 2]
         field: &#39;real&#39;
    matrixType: &#39;symmetric&#39;
multiplicities: [1, 1]
         types: &#39;RC&#39;
             U: 3 x 3 double
        blocks: [1, 2]

</pre></div></div>
</div>
<p>No new variable has been introduced in the new object, but the block structure has been found:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-octave notranslate"><div class="highlight"><pre>
<span></span><span class="nb">full</span><span class="p">(</span><span class="n">MInvariantBlock</span><span class="p">.</span><span class="n">blockMask</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
ans =

   1   0   0
   0   1   1
   0   1   1

</pre></div></div>
</div>
<p>The block structure is used when requesting this matrix to be PSD:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-octave notranslate"><div class="highlight"><pre>
<span></span><span class="n">MInvariantBlock</span> <span class="o">&gt;</span><span class="p">=</span> <span class="mi">0</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
|   ID|                    Constraint|   Coefficient range|
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
|   #1|   Element-wise inequality 1x1|              2 to 2|
|   #2|         Matrix inequality 2x2|     4.1633e-16 to 2|
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
</pre></div></div>
</div>
</div>
<div class="section" id="Comparison-with-a-direct-formulation">
<h2>Comparison with a direct formulation<a class="headerlink" href="#Comparison-with-a-direct-formulation" title="Permalink to this headline">¶</a></h2>
<p>To conclude, let us show in more detail why the SDP formulation of a problem is more efficient if it takes advantage of the available symmetry properties. For this, we consider again the problem described at the beginning of this page. This problem can be solved directly as follows:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-octave notranslate"><div class="highlight"><pre>
<span></span><span class="n">M</span> <span class="p">=</span> <span class="n">sdpvar</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="n">constraints</span> <span class="p">=</span> <span class="p">[</span><span class="nb">trace</span><span class="p">(</span><span class="n">M</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">,</span> <span class="n">M</span><span class="p">(</span><span class="n">permutation</span><span class="p">,</span> <span class="n">permutation</span><span class="p">)</span> <span class="o">==</span> <span class="n">M</span><span class="p">,</span> <span class="n">M</span> <span class="o">&gt;</span><span class="p">=</span> <span class="mi">0</span><span class="p">];</span>
<span class="n">diagnostic</span> <span class="p">=</span> <span class="n">optimize</span><span class="p">(</span><span class="n">constraints</span><span class="p">,</span> <span class="n">M</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span> <span class="n">sdpsettings</span><span class="p">(</span><span class="s">&#39;verbose&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="n">MOpt</span> <span class="p">=</span> <span class="n">value</span><span class="p">(</span><span class="n">M</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
diagnostic =

  scalar structure containing the fields:

    yalmipversion = 20190425
    yalmiptime =  0.085077
    solvertime =  0.50967
    info = Successfully solved (SDPT3-4)
    problem = 0

MOpt =

   0.33333  -0.16667  -0.16667
  -0.16667   0.33333  -0.16667
  -0.16667  -0.16667   0.33333

</pre></div></div>
</div>
<p>Again, we find that the lowest possible value of <span class="math notranslate nohighlight">\(M(1,2)\)</span> which is compatible with the matrix <span class="math notranslate nohighlight">\(M\)</span> having only positive eigenvalues is <span class="math notranslate nohighlight">\(-1/6\)</span>. However, this last SDP problem is more complex than the first one which takes into account symmetries.</p>
<div class="section" id="Complexity-comparison">
<h3>Complexity comparison<a class="headerlink" href="#Complexity-comparison" title="Permalink to this headline">¶</a></h3>
<p>The symmetric formulation of the above problem involves fewer variables and simpler constraints, as summarized in the following table:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 51%" />
<col style="width: 20%" />
<col style="width: 29%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Formulation:</p></th>
<th class="head"><p>Direct</p></th>
<th class="head"><p>Symmetric</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p># variables</p></td>
<td><p>6</p></td>
<td><p>2</p></td>
</tr>
<tr class="row-odd"><td><p># equality constraints</p></td>
<td><p>10</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>Size of PSD blocks</p></td>
<td><p>3</p></td>
<td><p>1x1 and 2x2</p></td>
</tr>
</tbody>
</table>
<p>This can be checked by examining the variables involved. In the non-symmetrized case, we have</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-octave notranslate"><div class="highlight"><pre>
<span></span><span class="n">M</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Linear matrix variable 3x3 (symmetric, real, 6 variables)
Eigenvalues between [-2.2285e-09,0.5]
Coeffiecient range: 1 to 1
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-octave notranslate"><div class="highlight"><pre>
<span></span><span class="n">constraints</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
|   ID|                Constraint|   Coefficient range|
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
|   #1|   Equality constraint 1x1|              1 to 1|
|   #2|   Equality constraint 3x3|              1 to 1|
|   #3|     Matrix inequality 3x3|              1 to 1|
+++++++++++++++++++++++++++++++++++++++++++++++++++++++
</pre></div></div>
</div>
<p>we see that it involves</p>
<ul class="simple">
<li><p>6 variables</p></li>
<li><p>1+3x3=10 equality constraints</p></li>
<li><p>1 PSD block of size 3x3</p></li>
</ul>
<p>In the symmetrized case, we have</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-octave notranslate"><div class="highlight"><pre>
<span></span><span class="n">MSym</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
MSym =

Commutant variable 3x3 (2 blocks, 2 scalar variables)
           dim: 3
   dimensions1: [1, 2]
         field: &#39;real&#39;
    matrixType: &#39;symmetric&#39;
multiplicities: [1, 1]
         types: &#39;RC&#39;
             U: 3 x 3 double
        blocks: [1, 2]

</pre></div></div>
</div>
<p>In other words, the matrix is made of two blocks of size 1x1 and 2x2, and involves altogether just 2 variables.</p>
<p>The constraints this time are</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-octave notranslate"><div class="highlight"><pre>
<span></span><span class="n">constraintsSym</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
|   ID|                    Constraint|   Coefficient range|
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
|   #1|       Equality constraint 1x1|              1 to 2|
|   #2|   Element-wise inequality 1x1|              1 to 1|
|   #3|         Matrix inequality 2x2|              1 to 1|
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
</pre></div></div>
</div>
<p>This formulation thus involves:</p>
<ul class="simple">
<li><p>2 variables</p></li>
<li><p>1 equality constraint</p></li>
<li><p>SDP blocks of size 1x1 and 2x2</p></li>
</ul>
</div>
</div>
</div>


          </div>
            
  <div class="footer-relations">
    
      <div class="pull-left">
        <a class="btn btn-default" href="index.html" title="previous chapter (use the left arrow)">How to</a>
      </div>
    
      <div class="pull-right">
        <a class="btn btn-default" href="../topic/index.html" title="next chapter (use the right arrow)">Topic guides</a>
      </div>
    </div>
    <div class="clearer"></div>
  
        </div>
        <div class="clearfix"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../mat-modindex.html" title="MATLAB Module Index"
             >matlab index</a> |</li>
        <li class="right" >
          <a href="../topic/index.html" title="Topic guides"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="How to"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">RepLAB 0.6.1 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >How to</a> &#187;</li> 
      </ul>
    </div>
<script type="text/javascript">
  $("#mobile-toggle a").click(function () {
    $("#left-column").toggle();
  });
</script>
<script type="text/javascript" src="../_static/js/bootstrap.js"></script>
  <div class="footer">
    &copy; Copyright 2018-2020, Denis Rosset, Jean-Daniel Bancal and collaborators. Created using <a href="http://sphinx.pocoo.org/">Sphinx</a>.
  </div>
  </body>
</html>